<!-- <script>
function findStr(str) {
  let state = start;
  for(let c of str) {
    state = state(c);
  }
  return state === end;
}

function start(c) {
  if (c === 'a') {
    return findA;
  } else {
    return start(c);
  }
}

function end(c) {
  return end;
}

function findA(c) {
  if (c === 'b') {
    return findB;
  } else {
    return start(c);
  }
}
function findB(c) {
  if (c === 'c') {
    return findC;
  } else {
    return start(c);
  }
}
function findC(c) {
  if (c === 'a') {
    return findA2;
  } else {
    return start(c);
  }
}
function findA2(c) {
  if (c === 'b') {
    return findB2;
  } else {
    return start(c);
  }
}
function findB2(c) {
  if (c === 'x') {
    return end;
  } else {
    return findB(c);
  }
}
console.log(findStr('abcabx'));
</script> -->

<script>
function findStr(str) {
  let state = start;
  for(let c of str) {
    state = start(c);
  }
  return state === end;
}

function start(c) {
  if (c === 'a') {
    return findA;
  } else {
    return start(c);
  }
}

function end(c) {
  return end;
}

function findA(c) {
  if (c === 'b') {
    return findB;
  } else {
    return start(c);
  }
}
function findB(c) {
  if (c === 'a') {
    return findA2;
  } else {
    return start(c);
  }
}

function findA2(c) {
  if (c === 'b') {
    return findB2;
  } else {
    return start(c);
  }
}
function findB2(c) {
  if (c === 'a') {
    return findA3;
  } else {
    return start(c);
  }
}
function findA3(c) {
  if (c === 'b') {
    return findB3;
  } else {
    return start(c);
  }
}
function findB3(c) {
  if (c === 'x') {
    return end;
  } else {
    return findB2(c);
  }
}
console.log(findStr('abababx'));
    </script>
## 练习3
    <script>
      function findStr3(str) {
        let pattern = 'abcdabef';
        let step = 0;
        let table = new Array(pattern.length).fill(0);
        let j = 0;
        for (let i = 1; i < pattern.length; i++) {
          if (pattern[i] === pattern[j]) {
            j++;
            table[i+1] = j;
          } else {
            j = table[j];
          }
        }
        let m = 0;
        while(m < str.length) {
          if (str[m] === pattern.length) {
            step++;
            if (step === pattern.length) {
              return true;
            }
            m++;
          } else {
            step = table[step];
          }
        }
        return false;
      }
    </script>